<template name="postPage">
	<a href="{{pathFor 'postsList'}}" data-transition-out="slideRightOut" data-transition-in="slideRightIn">
		<div class="back-btn">
			<span class="fa fa-chevron-left"></span>
		</div>
	</a>
	
<div class="fullscreen-toggle">
     <button type="button" class="btn btn-sm btn-default btn-orbitist" data-toggle="modal" data-target="#myModal"><span class="fa fa-list-ul"></span> Info</button>
</div><!-- fullscreen-toggle -->

<!-- Modal -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">{{title}}</h4>
      </div>
      <div class="modal-body">
        {{#markdown}}{{description}}{{/markdown}}
		<em><small>Make a map like this one using <a href="http://orbitist.com">Orbitist.com</a>. Powered by <a href="http://leafletjs.com">Leaflet</a>, <a href="https://www.mapbox.com/about/maps/">© Mapbox</a>, <a href="https://www.openstreetmap.org/about">© OpenStreetMap</a>, and <a href="http://maps.stamen.com/">Stamen Design</a>. <a href="https://www.mapbox.com/map-feedback/">Improve this map</a>.</small></em>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn-orbitist" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

		<!-- map -->
		<div class="map" id="map"></div>
<script>
// Set lat/long where the map initiates and at what zoom level
var map = new L.Map('map', {
});

// Add an OpenStreetMap tile layer
L.tileLayer('{{tileLayer}}', {
	attribution: '&copy; <a href="http://mapbox.com">Mapbox</a>'
}).addTo(map);
</script>
		
<script>
// GeoJSON is pasted before the semi-colon below:
var orbitistGeoJson = {{geojson}};
  
// Markers are configured here:
var orbitistIcon = L.icon({
 	iconUrl: '{{marker}}',
    iconSize:     [30, 30], // size of the icon
    iconAnchor:   [15, 30], // point of the icon which will correspond to marker's location
    popupAnchor:  [1, -20] // point from which the popup should open relative to the iconAnchor
    });
  
// ADVANCED: This tells the map what goes in popups.
function orbitistPopup(feature, layer) {
    // does this feature have a property named popupContent?
    if (feature.properties && feature.properties.name) {
        layer.bindPopup(feature.properties.description, {closeButton: true});
    }
}

// ADVANCED: This adds the markers to the map.
var bounds = L.geoJson(orbitistGeoJson, {
    pointToLayer: function (feature, latlng) {
        return L.marker(latlng, {icon: orbitistIcon});
    },
    onEachFeature: orbitistPopup
}).addTo(map);

map.fitBounds(bounds);

</script>
<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
{{> analytics}}
</template>